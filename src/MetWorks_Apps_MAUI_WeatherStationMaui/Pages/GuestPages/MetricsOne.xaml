<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:MetWorks.Apps.MAUI.WeatherStationMaui.ViewModels"
             x:Class="MetWorks.Apps.MAUI.WeatherStationMaui.Pages.GuestPages.MetricsOne"
             x:DataType="viewmodels:MetricsOneViewModel">

    <Grid Margin="0" Padding="12" RowSpacing="0" ColumnSpacing="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
        </Grid.ColumnDefinitions>
        <Label
                Grid.Row="0" Grid.ColumnSpan="50" 
                FontSize="40" TextColor="{StaticResource GoldVikings}"
                HorizontalOptions="Center"
                Text="Metrics" 
        />
        <Label
                Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="4" 
                FontSize="22" TextColor="{StaticResource GoldVikings}"
                Text="Captured:" 
        />
        <Label
                Grid.Row="1" Grid.Column="4" Grid.ColumnSpan="8"
                FontSize="22" TextColor="{StaticResource WhiteVikings}" 
                Text="{Binding Current.CapturedUtc, Converter={StaticResource TimeConverter}, StringFormat='{}{0:G}'}" 
        />
        <Label
                Grid.Row="1" Grid.Column="12" Grid.ColumnSpan="8"
                FontSize="22" TextColor="{StaticResource GoldVikings}" 
                Text="Interval (seconds):"
        />
        <Label
                Grid.Row="1" Grid.Column="19" Grid.ColumnSpan="2"
                FontSize="22" TextColor="{StaticResource WhiteVikings}"
                Text="{Binding Current.IntervalSeconds}"
        />
        <Label
                Grid.Row="1" Grid.Column="21" Grid.ColumnSpan="3"
                FontSize="22" TextColor="{StaticResource GoldVikings}"
                Text="Persist:"
        />
        <Label 
                Grid.Row="1" Grid.Column="24" Grid.ColumnSpan="3"
                FontSize="22" TextColor="{StaticResource WhiteVikings}"
                Text="{Binding PersistStatusDisplay}"
        />
        <Label
                Grid.Row="1" Grid.Column="28" Grid.ColumnSpan="6"
                FontSize="22" TextColor="{StaticResource GoldVikings}" 
                Text="Persist Attempt:" 
        />
        <Label
                Grid.Row="1" Grid.Column="34" Grid.ColumnSpan="8"
                FontSize="22" TextColor="{StaticResource WhiteVikings}" 
                Text="{Binding Current.PersistAttemptUtc, Converter={StaticResource TimeConverter}, StringFormat='{}{0:G}'}"
        />
        <Label
                Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="5"
                FontSize="22" TextColor="{StaticResource GoldVikings}" 
                Text="Persist Error:" LineBreakMode="TailTruncation" 
        />
        <Label
                Grid.Row="3" Grid.Column="5" Grid.ColumnSpan="5"
                FontSize="20" TextColor="{StaticResource WhiteVikings}" 
                LineBreakMode="TailTruncation"
                Text="{Binding PersistErrorMessageDisplay}" 
        />
        <Label 
                Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="4"
                FontSize="22" TextColor="{StaticResource GoldVikings}" 
                Text="Process:"
        />
        <Label
                Grid.Row="4" Grid.Column="5" Grid.ColumnSpan="45"
                FontSize="20" TextColor="{StaticResource WhiteVikings}" 
                LineBreakMode="TailTruncation"
                Text="{Binding ProcessSummaryLine}"
        />
        <Label 
                Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="4"
                FontSize="22" TextColor="{StaticResource GoldVikings}" 
                LineBreakMode="TailTruncation"
                Text="G.C.:"
        />
        <Label
                Grid.Row="5" Grid.Column="5" Grid.ColumnSpan="45"
                FontSize="20" TextColor="{StaticResource WhiteVikings}"
                LineBreakMode="TailTruncation"
                Text="{Binding GcSummaryLine}"
        />
        <Label
                Grid.Row="6" Grid.Column="0" Grid.ColumnSpan="4"
                FontSize="22" TextColor="{StaticResource GoldVikings}"
                Text="Relay:"
        />
        <Label
                Grid.Row="6" Grid.Column="5" Grid.ColumnSpan="45"
                FontSize="20" TextColor="{StaticResource WhiteVikings}"
                LineBreakMode="TailTruncation"
                Text="{Binding TopRelayHandler1}"
        />
        <Label
                Grid.Row="7"  Grid.Column="5" Grid.ColumnSpan="45"
                FontSize="20" TextColor="{StaticResource WhiteVikings}"
                LineBreakMode="TailTruncation"
                Text="{Binding TopRelayHandler2}"
        />
        <Label
                Grid.Row="8" Grid.Column="0" Grid.ColumnSpan="4"
                FontSize="22" TextColor="{StaticResource GoldVikings}" 
                Text="Pipeline:"
        />
        <Label 
                Grid.Row="8" Grid.Column="5" Grid.ColumnSpan="45"
                FontSize="20" TextColor="{StaticResource WhiteVikings}" 
                LineBreakMode="TailTruncation"
                Text="{Binding TopPipelineReading1}"
        />
        <Label 
                Grid.Row="9" Grid.Column="5" Grid.ColumnSpan="45"
                FontSize="20" TextColor="{StaticResource WhiteVikings}" 
                LineBreakMode="TailTruncation"
                Text="{Binding TopPipelineReading2}"
        />
        <Label
                Grid.Row="10" Grid.Column="0" Grid.ColumnSpan="4"
                FontSize="22" TextColor="{StaticResource GoldVikings}"
                Text="Fan-out:" />
        <Label
                Grid.Row="10" Grid.Column="5" Grid.ColumnSpan="45"
                FontSize="20" TextColor="{StaticResource WhiteVikings}"
                LineBreakMode="TailTruncation"
                Text="{Binding TopRelayFanout1}"
        />
        <Grid Grid.Row="12" Grid.Column="0" Grid.ColumnSpan="50" RowSpacing="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Label Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="5" FontSize="22" TextColor="{StaticResource GoldVikings}" Text="Json:" />
            <StackLayout Grid.Row="0" Grid.Column="1" Orientation="Horizontal" Spacing="6">
                <Button x:Name="btnJsonUp" Text="▲" FontSize="18" Padding="8,2" />
                <Button x:Name="btnJsonDown" Text="▼" FontSize="18" Padding="8,2" />
            </StackLayout>

            <Frame Grid.Row="1" Grid.ColumnSpan="2" Padding="10" Margin="0,0,0,0" BackgroundColor="#202020" BorderColor="#404040" HasShadow="False">
                <ScrollView x:Name="JsonScroll" Orientation="Vertical">
                    <Label FontSize="14"
                           TextColor="{StaticResource WhiteVikings}"
                           Text="{Binding JsonPayloadPreview}" />
                </ScrollView>
            </Frame>
        </Grid>
    </Grid>
</ContentView>
